<!DOCTYPE html>
<html lang="en"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{/layouts/default_layout}">
<head>
    <style>
      .container {
        max-width: 560px;
      }
      .field-error {
        border-color: #dc3545;
        color: #dc3545;
      }
    </style>
  <title>회원 가입</title>
</head>
<div layout:fragment="content">
  <div class="container">
      <div class="py-5 text-center">
        <h2>회원 가입</h2>
      </div>
      <h4 class="mb-3">회원 정보 입력</h4>
      <form action="/members/new" th:action th:object="${memberFromDto}" method="post">
          <div th:if="${#fields.hasGlobalErrors()}">
            <p class="field-error" th:each="err : ${#fields.globalErrors()}" th:text="${err}">
              전체 오류 메세지
            </p>
          </div>
          <div>
            <label th:for="name">NAME</label>
            <input type="text" th:field="*{name}" class="form-control" th:errorclass="field-error"
                   placeholder="이름을 입력해주세요.">
            <div class="field-error" th:errors="*{name}"></div>
          </div>
          <div>
              <label th:for="name">ID</label>
              <input type="text" th:field="*{loginId}" class="form-control" th:errorclass="field-error"
                     placeholder="아이디를 입력해주세요.">
              <div class="field-error" th:errors="*{loginId}"></div>
          </div>
          <div>
            <label th:for="password">PASSWORD</label>
            <input type="text" th:field="*{password}" class="form-control" th:errorclass="field-error"
                   placeholder="비밀번호을 입력해주세요.">
            <div class="field-error" th:errors="*{password}"></div>
          </div>
          <div>
              <label th:for="emailId">EMAILL</label>
              <input type="text" th:field="*{email}" class="form-control" th:errorclass="field-error"
                     placeholder="이메일을 입력해주세요.">
              <div class="field-error" th:errors="*{email}"></div>
          </div>
          <div>
            <label th:for="adress">ADDRESS</label>
            <input type="text" th:field="*{address}" class="form-control" th:errorclass="field-error"
                   placeholder="주소를 입력해주세요.">
            <div class="field-error" th:errors="*{address}"></div>
          </div>
          <hr class="my-4">
          <div class="row">
            <div class="col">
              <button class="w-100 btn btn-primary btn-lg" type="submit">회원 가입</button>
            </div>
            <div class="col">
              <button class="w-100 btn btn-secondary btn-lg"
                      onclick="location.href='items.html'"
                      th:onclick="|location.href='@{/}'|"
                      type="button">취소</button>
            </div>
          </div>
          <!-- 스프링 시큐리티를 사용할 경우 기본적으로 CSRF(Cross Site Request Forgery)를 방어하기 위해 모든 POST 방식의 데이터 전송에는
               CSRF 토큰 값이 있어야함. CSRF 토큰은 실제 서버에서 허용한 요청이 맞는지 확인하기 위한 토큰임.
               사용자의 세션에 임의의 값을 저장하여 요청마다 그 값을 포함하여 전송하면 서버에서 세션에 저장된 값과 요청이 온 값이 일치하는지 확인함.-->
          <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}">
      </form>
    </div>
</div>
</html>